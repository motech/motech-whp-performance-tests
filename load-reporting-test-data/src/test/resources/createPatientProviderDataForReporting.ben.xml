<?xml version="1.0" encoding="iso-8859-1"?>
<setup
    xmlns="http://databene.org/benerator/0.7.0"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://databene.org/benerator/0.7.0 http://databene.org/benerator-0.7.0.xsd">

    <import platforms="db"/>

    <comment>setting default values</comment>
    <setting name="stage" default="development"/>
    <setting name="database" default="whp"/>
    <setting name="dbCatalog" default="whp"/>
    <setting name="dbSchema" default="whp_reports"/>
    <setting name="dbPassword" default="p@ssw0rd"/>
    <setting name="dbBatch" default="false"/>
    <setting name="provider_count" default="5"/>
    <setting name="patient_count" default="5"/>
    <setting name="adherence_audit_log_count" default="1"/>
    <setting name="adherence_call_log_count" default="1"/>

    <include uri="{ftl:reports.ben.properties}"/>

    <database id="db" url="{dbUrl}" driver="{dbDriver}" catalog="{dbCatalog}" schema="{dbSchema}"
              user="{dbUser}" password="{dbPassword}" batch="{dbBatch}" acceptUnknownColumnTypes = "true"/>

    <generate type='provider' count='{provider_count}' consumer='db'>
        <variable name="sequential_mobile_no" type="long" generator="new IncrementalIdGenerator(1000000000)"/>
        <attribute name='primary_mobile' type='string' script="{'' + sequential_mobile_no }" />
        <attribute name='secondary_mobile' type='string' pattern="[1-9]{10}" unique="true"/>
        <attribute name='tertiary_mobile' type='string' pattern="[1-9]{10}" unique="true"/>
        <attribute name='district' type='string'
                   values="'Begusarai','East Champaran','Jehanabad','Khagaria','Muzaffarpur','Nalanda'"/>
        <attribute name='provider_id' type='string' script="Provider.district.substring(0, 3) + '0010'" converter="ToLowerCaseConverter, UniqueStringConverter"/>

        <generate type="patient" count="{patient_count}" consumer="db">
            <attribute name="patient_pk" type="long" generator="new IncrementalIdGenerator(1000)"/>
            <attribute name="patient_id" script="{'' + patient.patient_pk}" type="string"/>

            <generate type="patient_alert" count="1" consumer="db">
                <attribute name="alert_pk" script="{patient.patient_id}"/>
            </generate>

            <generate type="patient_address" count="1" consumer="db">
                <attribute name="address_pk" script="{patient.patient_id}"/>
                <attribute name="village"  type="string" constant="Village"/>
                <attribute name="block"  type="string" constant="Block"/>
                <attribute name="district"  type="string" constant="District"/>
                <attribute name="state"  type="string" constant="State"/>
                <attribute name="landmark"  type="string" constant="Landmark"/>
            </generate>

            <attribute name="patient_alert_fk" script="{patient.patient_id}" type="string"/>
            <attribute name="patient_address_fk" script="{patient.patient_id}" type="string"/>

            <variable name="person" generator="org.databene.domain.person.PersonGenerator"/>

            <attribute name="first_name" script="person.givenName" type="string"/>
            <attribute name="last_name" script="person.familyName" type="string"/>
            <attribute name="gender" values="'Male','Female'" type="string"/>
            <attribute name="gender" values="'Male','Female'" type="string"/>
            <attribute name="phone_no" type="string" constant="100"/>
            <attribute name="phi" type="string" constant="100"/>
            <attribute name="status" type="string" constant="100"/>
            <attribute name="is_active" type="string" constant="Y"/>

            <generate type="patient_therapy" count="1" consumer="db">
                <variable name="patient_therapy_id" type="long" generator="new IncrementalIdGenerator(1000)"/>
                <attribute name="therapy_pk" script="{patient_therapy_id}"/>
                <attribute name="therapy_id" script="{'' + patient_therapy.therapy_pk}" type="string"/>
                <attribute name="patient_fk" script="{patient.patient_id}" type="long"/>
                <attribute name="is_current_therapy" type="string" constant="Y"/>
                <attribute name="patient_age" type="int" constant="66"/>
                <attribute name="creation_date" type="date" constant="2012-12-25"/>
                <attribute name="start_date" type="date" constant="2012-12-25"/>
                <attribute name="close_date" type="date" constant="2012-12-25"/>
                <attribute name="status" type="string" constant="Status"/>
                <attribute name="treatment_category" type="string" constant="Category"/>
                <attribute name="disease_class" type="string" constant="Category"/>
                <attribute name="current_phase" type="string" constant="Y"/>
                <attribute name="cumulative_missed_doses" type="int" constant="6"/>

                <attribute name="ip_start_date" type="date" constant="2012-12-25"/>
                <attribute name="ip_end_date" type="date" constant="2012-12-25"/>
                <attribute name="ip_pills_taken" type="int" constant="6"/>
                <attribute name="ip_pills_remaining" type="int" constant="6"/>
                <attribute name="ip_total_doses" type="int" constant="6"/>

                <attribute name="cp_start_date" type="date" constant="2012-12-25"/>
                <attribute name="cp_end_date" type="date" constant="2012-12-25"/>
                <attribute name="cp_pills_taken" type="int" constant="6"/>
                <attribute name="cp_pills_remaining" type="int" constant="6"/>
                <attribute name="cp_total_doses" type="int" constant="6"/>

                <attribute name="eip_start_date" type="date" constant="2012-12-25"/>
                <attribute name="eip_end_date" type="date" constant="2012-12-25"/>
                <attribute name="eip_pills_taken" type="int" constant="6"/>
                <attribute name="eip_pills_remaining" type="int" constant="6"/>
                <attribute name="eip_total_doses" type="int" constant="6"/>

                <generate type="patient_treatment" count="1" consumer="db">
                    <variable name="patient_treatment_id" type="long" generator="new IncrementalIdGenerator(1000)"/>
                    <attribute name="treatment_pk" script="{patient_treatment_id}"/>
                    <attribute name="therapy_fk" script="{patient_therapy.therapy_pk}"/>
                    <attribute name="provider_id" type='string' constant="provider1"/>
                    <attribute name="provider_district" type='string' constant="district1"/>
                    <attribute name="tb_id" type='string' script="{'' + patient_treatment.treatment_pk}"/>
                    <attribute name="start_date" type="date" constant="2012-12-25"/>
                    <attribute name="end_date" type="date" constant="2012-12-25"/>
                    <attribute name="treatment_outcome" type='string' constant="outcome"/>
                    <attribute name="patient_type" type='string' constant="type"/>
                    <attribute name="tb_registration_no" type='string' script="{'' + patient_treatment.treatment_pk}"/>
                    <attribute name="pretreatment_result" type='string' constant="Negative"/>
                    <attribute name="pretreatment_weight" type='double' constant="80.0"/>
                    <attribute name="is_current_treatment" type='string' constant="Y"/>
                    <attribute name="is_paused" type='string' constant="N"/>
                </generate>
            </generate>

            <!--Adherence Data-->

            <generate type='adherence_audit_log' count="{adherence_audit_log_count}" consumer='db'>
                <variable name='district' type='string'
                          values="'Begusarai','East Champaran','Jehanabad','Khagaria','Muzaffarpur','Nalanda', 'Bengaluru', 'Patna', 'Samastipur', 'Arwal'"/>

                <attribute name='provider_id' type="string" script="provider.provider_id"/>
                <variable name="randomNumber" type="long"  min="1000" max="3000"/>
                <attribute name="patient_id" script="{'' + randomNumber}" type="string"/>

                <attribute name='tb_id' type="string" pattern="[1-9]{10}"/>

                <attribute name='creation_time' type='timestamp' min="2013-01-21 10:34:43" max="2013-05-21 10:34:43"/>

                <attribute name='dose_date' type='date' constant="2012-12-25"/>
                <attribute name='user_id' type='string' script="provider.provider_id"/>
                <attribute name='doses_taken' type='int' min="0" max="3"/>
                <attribute name='pill_status' type="string" values="'Not_Taken', 'Taken', 'Unknown'"/>
                <attribute name='channel' type='string' values="'IVR', 'WEB'"/>
                <attribute name='is_given_by_provider' type='string' values="'Y', 'N'"/>

                <generate type="adherence_record" count="{adherence_call_log_count}" consumer="db">
                    <attribute name='provider_id' type="string" script="provider.provider_id"/>

                    <attribute name="patient_id" type="string" script="adherence_audit_log.patient_id"/>

                    <attribute name="district" type="string" values="'Begusarai','East Champaran','Jehanabad','Khagaria','Muzaffarpur','Nalanda', 'Bengaluru', 'Patna', 'Samastipur', 'Arwal'"/>

                    <attribute name='tb_id' type="string" script="adherence_audit_log.tb_id"/>

                    <variable name="patient_therapy_id" type="long" generator="new IncrementalIdGenerator(1000)"/>
                    <attribute name="therapy_id" script="{'' + patient_therapy_id}" type="string"/>

                    <attribute name='pill_date' type='date' constant="2012-12-25"/>

                    <attribute name='pill_status' type="string" values="'Not_Taken', 'Taken', 'Unknown'"/>


                </generate>

                <generate type="adherence_call_log" count="{adherence_call_log_count}" consumer="db">
                    <attribute name="call_log_id" type="long" generator="new IncrementalIdGenerator(100)"/>
                    <attribute name="call_id" script="{'' + adherence_call_log.call_log_id}" type="string"/>
                    <attribute name="phone_number" type="string" constant="1234567890"/>

                    <variable name='district' type='string'
                              values="'Begusarai','East Champaran','Jehanabad','Khagaria','Muzaffarpur','Nalanda', 'Bengaluru', 'Patna', 'Samastipur', 'Arwal'"/>

                    <attribute name='provider_id' type="string" script="provider.provider_id"/>

                    <attribute name="attempt_time" type="date" min="2013-01-21" max="2013-05-21"/>
                    <attribute name="start_date_time" type="timestamp" min="2013-01-21 10:34:43" max="2013-05-21 10:34:43"/>
                    <attribute name="end_date_time" type="timestamp" min="2013-01-21 10:34:43" max="2013-05-21 10:34:43"/>

                    <attribute name="start_date" type="date" min="2013-01-21" max="2013-05-21"/>
                    <attribute name="end_date" type="date" min="2013-01-21" max="2013-05-21"/>

                    <attribute name="disposition" type="string" constant="ANSWERED"/>
                    <attribute name="error_message" type="string" constant="No Error"/>
                    <attribute name="call_type" type="string" constant="patientAlerts"/>
                    <attribute name="request_id" type="string" constant="request_id"/>
                    <attribute name="attempt_date_time" type="date" constant="2012-12-25"/>
                    <attribute name="attempt_number" type="int" constant="1"/>
                    <attribute name="duration" type="int" min="0" max="15"/>
                    <attribute name='patient_count' type='int' min="0" max="10"/>
                    <attribute name='adherence_captured_count' type='int' min="0" max="5"/>
                    <attribute name='adherence_not_captured_count' type='int' min="0" max="5"/>
                    <attribute name="flashing_call_id" script="adherence_call_log.call_id" type="string"/>

                    <attribute name='call_status' type="string" constant="Answered"/>
                    <attribute name='call_answered' type="string" constant="Yes"/>
                    <attribute name='disconnection_type' type="string" values="'PROVIDER_HUNGUP', 'NETWORK_ERROR', 'WGN_HUNGUP'"/>
                </generate>

                <generate type="adherence_call_log" count="{adherence_call_log_count}" consumer="db">
                    <attribute name="call_log_id" type="long" generator="new IncrementalIdGenerator(100)"/>
                    <attribute name="call_id" script="{'' + adherence_call_log.call_log_id}" type="string"/>
                    <attribute name="phone_number" type="string" constant="1234567890"/>

                    <variable name='district' type='string'
                              values="'Begusarai','East Champaran','Jehanabad','Khagaria','Muzaffarpur','Nalanda', 'Bengaluru', 'Patna', 'Samastipur', 'Arwal'"/>

                    <attribute name='provider_id' type="string" script="provider.provider_id"/>

                    <attribute name="attempt_time" type="date" min="2013-01-21" max="2013-05-21"/>
                    <attribute name="start_date_time" type="timestamp" min="2013-01-21 10:34:43" max="2013-05-21 10:34:43"/>
                    <attribute name="end_date_time" type="timestamp" min="2013-01-21 10:34:43" max="2013-05-21 10:34:43"/>

                    <attribute name="start_date" type="date" min="2013-01-21" max="2013-05-21"/>
                    <attribute name="end_date" type="date" min="2013-01-21" max="2013-05-21"/>

                    <attribute name="disposition" type="string" constant="ANSWERED"/>
                    <attribute name="error_message" type="string" constant="No Error"/>
                    <attribute name="call_type" type="string" constant="patientAlerts"/>
                    <attribute name="request_id" type="string" constant="request_id"/>
                    <attribute name="attempt_date_time" type="date" constant="2012-12-25"/>
                    <attribute name="attempt_number" type="int" constant="1"/>
                    <attribute name="duration" type="int" min="0" max="15"/>
                    <attribute name='patient_count' type='int' min="0" max="10"/>
                    <attribute name='adherence_captured_count' type='int' min="0" max="5"/>
                    <attribute name='adherence_not_captured_count' type='int' min="0" max="5"/>
                    <attribute name="flashing_call_id" script="adherence_call_log.call_id" type="string"/>

                    <attribute name='call_status' type="string" constant="Not Answered"/>
                    <attribute name='call_answered' type="string" constant="No"/>
                    <attribute name='disconnection_type' type="string" values="'MISSED_CALL', 'NETWORK_ERROR', 'WGN_HUNGUP'"/>
                </generate>
            </generate>


        </generate>
    </generate>
</setup>
