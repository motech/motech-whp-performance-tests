<setup>
    <import platforms='couchdb'/>
    <couchdb database='couchdb' name='motech-tb-adherence' environment='test'/>
    <generate type='AdherenceLog' count='1000' consumer='couchdb'>
        <attribute name='externalId' type='string' pattern="[1-9]{10}" unique="true"/>
        <attribute name='treatmentId' type='string' pattern="[1-9]{10}" unique="true"/>
        <attribute name='doseDate' type='string' values="'2012-12-21','2012-12-14','2012-12-07','2012-12-01','2011-12-21','2011-12-14','2011-12-07','2011-12-01'" />
        <attribute name='status' type="int" constant="1"/>

        <variable name='district' type='string' values="'Begusarai','East Champaran','Jehanabad','Khagaria','Muzaffarpur','Nalanda'" />
        <part name='meta' container='map' count="1">
            <attribute name='PROVIDER_ID' type="string" script="district.substring(0, 3) + '1000'" converter="ToLowerCaseConverter, UniqueStringConverter"/>
            <attribute name='TB_ID' type="string" pattern="[1-9]{10}"/>
        </part>
    </generate>
</setup>